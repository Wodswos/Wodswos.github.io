<!DOCTYPE html>
<html lang="" xml:lang="" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta charset="utf-8"/>
  <meta content="pandoc" name="generator"/>
  <meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport"/>
  <meta content="fivezehua@qq.com" name="author"/>
  <title>
   Flume
  </title>
  <style>
   html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
   #TOC {
    border-left: gray 2px dashed;
    padding: 5px;
    margin: 2%;

    right: 0;
    position: fixed;
    top: 5%;
    max-height: 90%;

    overflow: scroll;
  }
  #TOC::-webkit-scrollbar{
    width: 0!important;
  }
  #TOC a {
    color: gray;
  }
  

    #main-navigation{
        position:fixed;
        left: 0;
        top: 0;
        width: 100%;

        z-index: 999;
    }

    #navigation-list-wrapper{
        display: flex;
        background-color: #ffffff;
        height: 35px;

        font-family: 'Times New Roman';
        font-size: 15px;
    }
    .main-topic-div{
        height: 40px;
        font-size: 20px;
    }

        .web-header{
          text-decoration: none;
          font-size: 25px;
        }

        .hutao-img{
            /* margin-right: 2%; */
            height: 30px;
            width: 30px;
            border-radius: 5px;
            margin-right: 5px;
        }

    .navigation-topic{
        /* display: inline; */
        background-color: #fdfdfd;
        border: #fdfdfd;
        font-size: 10px;
        overflow: hidden;
        margin-left: 2%;

        flex: 1;
    }
    .navigation-topic:hover{
        overflow: visible;
    }

    .drop-item, .main-topic-div{
        padding: 2px;
        background-color: #ffffff;
    }

    .drop-item a, .main-topic-div a{
        text-decoration: none;
        border-radius: 5px;
        font-size: 15px;
    }
    .drop-item a:hover, .main-topic-div a:hover{
        background-color: #e6e6e6;
    }


    #sub-navigation{
        border-right: #e6e6e6 solid 1px;
        position: fixed;
        left: 0;
        max-height: 90%;
        max-width: 20%;

        overflow: scroll;
    }
    #sub-navigation::-webkit-scrollbar{
        width: 0!important;
      }
    #sub-navigation li{
        list-style: none;
    }
    #sub-navigation a{
        color: #222222;
        text-decoration: none;
        font-size: 12px;
    }
    #sub-navigation a:hover{
        color: #606060;
        text-decoration: underline;
    }
    #current-path{
        background-color: #e6e6e6;
        border-top: #aaaaaa solid 1px;
        border-bottom: #aaaaaa solid 1px;
    }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
 </head>
 <body>
  <tag id="sub-navigation">
   <li>
    <a href="https://wodswos.github.io/03-分布式系统和并行计算/index.html">
     03-分布式系统和并行计算
    </a>
    <ul>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/index.html">
       00-并行计算
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/00-指令粒度的并行运算.html">
         00-指令粒度的并行运算.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/index.html">
         index.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/index.html">
       01-分布式和一致性
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/01-CAP.html">
         01-CAP.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/01-分布式和现代架构.html">
         01-分布式和现代架构.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/02-分布式存储.html">
         02-分布式存储.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/03-分布式计算.html">
         03-分布式计算.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/index.html">
         index.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/index.html">
       02-分布式通信和协同
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/0x-RPC.html">
         0x-RPC.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/Apache Beam.html">
         Apache Beam.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/消息队列.html">
         消息队列.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/index.html">
       0x-主流实现和应用
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Flume.html">
         Flume.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Hadoop.html">
         Hadoop.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Kafka.html">
         Kafka.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Sqoop.html">
         Sqoop.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Storm.html">
         Storm.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Storm速览.html">
         Storm速览.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/zookeeper vs mq.html">
         zookeeper vs mq.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/zookeeper.html">
         zookeeper.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-云计算.html">
       0x-云计算.html
      </a>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-算一笔帐-量化计算机资源.html">
       0x-算一笔帐-量化计算机资源.html
      </a>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-边缘计算.html">
       0x-边缘计算.html
      </a>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/index.html">
       index.html
      </a>
     </li>
    </ul>
   </li>
  </tag>
  <div id="main-navigation">
   <div id="navigation-list-wrapper">
    <a class="web-header" href="https://wodswos.github.io">
     <img alt="hutao-img" class="hutao-img" src="https://zehua-markdown.oss-cn-shanghai.aliyuncs.com/logo.jpg"/>
     zehua's website
    </a>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/01-数理基础index.html">
       数理基础
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/00-数学史概要.html">
       数学史概要
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/01-数理且哲学66/index.html">
       01-数理且哲学66
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/02-变化且分析77/index.html">
       02-变化且分析77
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/03-结构且代数88/index.html">
       03-结构且代数88
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/04-随机且统计99/index.html">
       04-随机且统计99
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/05-其他/index.html">
       05-其他
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/06-应用数学-信息论和编码/index.html">
       06-应用数学-信息论和编码
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/06-物理/index.html">
       06-物理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/supplement-关于数学符号.html">
       关于数学符号
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/supplement-关于追问本质和追问直观.html">
       关于追问本质和追问直观
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/02-计算机科学基础index.html">
       计算机科学基础
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0-天才们的构思-计算机的理论大厦/index.html">
       0-天才们的构思-计算机的理论大厦
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0x-《Crash Course Computer Science》笔记.html">
       《Crash Course Computer Science》笔记
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0x-从半导体萌芽到互联网时代的所有巨头.html">
       从半导体萌芽到互联网时代的所有巨头
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0x-模拟计算机会卷土重来吗？.html">
       模拟计算机会卷土重来吗？
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/1-硬件族谱-计算机组成原理/index.html">
       1-硬件族谱-计算机组成原理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/2-面向硬件编程-从汇编到C/index.html">
       2-面向硬件编程-从汇编到C
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/3-硬件资源的统一管理-操作系统/index.html">
       3-硬件资源的统一管理-操作系统
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/4-面向编译器和解释器编程-高级计算机语言/index.html">
       4-面向编译器和解释器编程-高级计算机语言
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/5-计算科学的艺术-数据结构与算法/index.html">
       5-计算科学的艺术-数据结构与算法
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/6-信息革命-计算机网络/index.html">
       6-信息革命-计算机网络
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/7-设计和架构-软件工程瞎扯淡/index.html">
       7-设计和架构-软件工程瞎扯淡
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/8-拾遗和杂谈/index.html">
       8-拾遗和杂谈
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/计算机编年史.html">
       计算机编年史
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算index.html">
       分布式系统和并行计算
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/index.html">
       00-并行计算
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/index.html">
       01-分布式和一致性
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/index.html">
       02-分布式通信和协同
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/index.html">
       0x-主流实现和应用
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-云计算.html">
       云计算
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-算一笔帐-量化计算机资源.html">
       算一笔帐-量化计算机资源
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-边缘计算.html">
       边缘计算
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/04-人工智能之机器学习index.html">
       人工智能之机器学习
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/0-人工智能先验知识和早期实践/index.html">
       0-人工智能先验知识和早期实践
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/1.1-监督学习/index.html">
       1.1-监督学习
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/1.2-无监督学习/index.html">
       1.2-无监督学习
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/2-关联分析-不知道是什么东西/index.html">
       2-关联分析-不知道是什么东西
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/2-实践篇-数据预处理/index.html">
       2-实践篇-数据预处理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/x-Python的机器学习库.html">
       Python的机器学习库
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/损失函数的设计.html">
       损失函数的设计
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/05-深度学习方法index.html">
       深度学习方法
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/0-神经网络基础/index.html">
       0-神经网络基础
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/0-神经网络框架和工具实践/index.html">
       0-神经网络框架和工具实践
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/2.1-应用-数字图像处理和计算机视觉：数字图像处理/index.html">
       2.1-应用-数字图像处理和计算机视觉：数字图像处理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/2.2-应用-数字图像处理和计算机视觉：计算机视觉/index.html">
       2.2-应用-数字图像处理和计算机视觉：计算机视觉
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/2.3-应用-自然语言处理/index.html">
       2.3-应用-自然语言处理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/x-脉冲神经网络.html">
       脉冲神经网络
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/生活里的“智能”和“迷惑行为”.html">
       生活里的“智能”和“迷惑行为”
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器index.html">
       工欲善其事必先利其器
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/0.0-Plan/index.html">
       0.0-Plan
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Git-Action-Workflow和持续集成.html">
       Action-Workflow和持续集成
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Git-项目协同的典范.html">
       项目协同的典范
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Linux/index.html">
       Linux
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Python-胶水和自动化/index.html">
       Python-胶水和自动化
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Visio.html">
       Visio
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/代码复用和包管理工具.html">
       代码复用和包管理工具
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/收纳和整理.html">
       收纳和整理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/笔记：从信息到知识，从编辑到管理/index.html">
       笔记：从信息到知识，从编辑到管理
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/07-技多不压身index.html">
       技多不压身
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.0-哲学和认知/index.html">
       0.0-哲学和认知
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.1-生命、人类、社会/index.html">
       0.1-生命、人类、社会
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.2-社会分配：政治、经济/index.html">
       0.2-社会分配：政治、经济
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.3-系统科学/index.html">
       0.3-系统科学
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/1.1-英语/index.html">
       1.1-英语
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/1.2-读书笔记/index.html">
       1.2-读书笔记
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/1.3-养生式健身/index.html">
       1.3-养生式健身
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/2.1-干饭人干饭魂/index.html">
       2.1-干饭人干饭魂
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/2.2-关于文字/index.html">
       2.2-关于文字
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/2.2-独立生活/index.html">
       2.2-独立生活
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/3.1-吃喝玩乐/index.html">
       3.1-吃喝玩乐
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/s-fiction/index.html">
       s-fiction
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/打工人的事情：劳务和社保.html">
       打工人的事情：劳务和社保
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/护肤基础常识.html">
       护肤基础常识
      </a>
     </div>
    </div>
   </div>
   <div id="current-path">
   </div>
  </div>
  <header id="title-block-header">
   <h1 class="title">
    Flume
   </h1>
   <p class="author">
    fivezehua@qq.com
   </p>
  </header>
  <nav id="TOC" role="doc-toc">
   <ul>
    <li>
     <a href="#flume概述" id="toc-flume概述">
      Flume概述
     </a>
     <ul>
      <li>
       <a href="#架构" id="toc-架构">
        架构
       </a>
       <ul>
        <li>
         <a href="#data-flow-model" id="toc-data-flow-model">
          Data Flow
model
         </a>
        </li>
        <li>
         <a href="#comlex-flows" id="toc-comlex-flows">
          Comlex flows
         </a>
        </li>
        <li>
         <a href="#可靠性" id="toc-可靠性">
          可靠性
         </a>
        </li>
        <li>
         <a href="#其他" id="toc-其他">
          其他
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#安装部署" id="toc-安装部署">
        安装部署
       </a>
       <ul>
        <li>
         <a href="#创建服务器端" id="toc-创建服务器端">
          创建服务器端
         </a>
        </li>
        <li>
         <a href="#创建客户端" id="toc-创建客户端">
          创建客户端
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li>
     <a href="#flume组件详解" id="toc-flume组件详解">
      FLume组件详解
     </a>
     <ul>
      <li>
       <a href="#agent" id="toc-agent">
        Agent
       </a>
       <ul>
        <li>
         <a href="#source" id="toc-source">
          Source
         </a>
        </li>
        <li>
         <a href="#channel" id="toc-channel">
          Channel
         </a>
        </li>
        <li>
         <a href="#sink" id="toc-sink">
          Sink
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#collector" id="toc-collector">
        Collector
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#setup1" id="toc-setup1">
      Setup
     </a>
     <ul>
      <li>
       <a href="#single-agent" id="toc-single-agent">
        Single Agent
       </a>
       <ul>
        <li>
         <a href="#trigger" id="toc-trigger">
          Trigger
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#data-ingestion" id="toc-data-ingestion">
        Data
ingestion
       </a>
      </li>
      <li>
       <a href="#multi-agent-flow" id="toc-multi-agent-flow">
        Multi-agent
flow
       </a>
      </li>
      <li>
       <a href="#consolidation" id="toc-consolidation">
        Consolidation
       </a>
      </li>
      <li>
       <a href="#multiplexing-the-flow" id="toc-multiplexing-the-flow">
        multiplexing the flow
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#flume-vs-kafka" id="toc-flume-vs-kafka">
      Flume vs Kafka
     </a>
     <ul>
      <li>
       <a href="#整合flume和kafka" id="toc-整合flume和kafka">
        整合Flume和Kafka
       </a>
      </li>
      <li>
       <a href="#storm-flume-kafka2" id="toc-storm-flume-kafka2">
        Storm-Flume-Kafka
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#debug日志" id="toc-debug日志">
      Debug日志
     </a>
    </li>
   </ul>
  </nav>
  <p>
   Flume Agent Souce Sink 绑定 Channel
  </p>
  <p>
   Channel里的Event按照轮询发送sink到目的地
  </p>
  <h1 id="flume概述">
   Flume概述
  </h1>
  <figure>
   <img alt="image" src="C:/Users/Five/Desktop/note/img/1228818-20180505130552077-1235640783.png"/>
   <figcaption aria-hidden="true">
    image
   </figcaption>
  </figure>
  <p>
   Flume 在0.9.x and 1.x之间有较大的架构调整，1.x版本之后的改称Flume
NG（Next Generation），0.9.x的称为Flume OG（Original Generation）。
  </p>
  <h2 id="架构">
   架构
  </h2>
  <h3 id="data-flow-model">
   Data Flow model
  </h3>
  <p>
   A Flume event is defined as a unit of data flow having a byte payload
and an optional set of string attributes.
  </p>
  <p>
   A Flume agent is a (JVM) process that hosts the components through
which events flow from an external source to the next destination
(hop).
  </p>
  <figure>
   <img alt="image" src="C:/Users/Five/Desktop/note/img/DevGuide_image00.png"/>
   <figcaption aria-hidden="true">
    image
   </figcaption>
  </figure>
  <h3 id="comlex-flows">
   Comlex flows
  </h3>
  <p>
   感觉Flume的multi-hop flows有点Storm的味道。
  </p>
  <h3 id="可靠性">
   可靠性
  </h3>
  <p>
   Flume提供3种数据可靠性选项
  </p>
  <ul>
   <li>
    End-to-end
    <ul>
     <li>
      磁盘日志和接收端Ack的方式，保证Flume接收的数据到达目的地
     </li>
    </ul>
   </li>
   <li>
    Store on failure
    <ul>
     <li>
      在目的地不可用时，数据保持在本地硬盘
     </li>
     <li>
      进程出现问题可能会丢失部分数据
     </li>
    </ul>
   </li>
   <li>
    Best effort
   </li>
  </ul>
  <h3 id="其他">
   其他
  </h3>
  <ul>
   <li>
    伸缩性：三大组件Collector、Master、Storage tier均可伸缩
   </li>
   <li>
    配置一致性：利用Zookeeper和gossip，保证配置数据的一致性
   </li>
   <li>
    扩展性：自定义Source、Sink等
   </li>
  </ul>
  <h2 id="安装部署">
   安装部署
  </h2>
  <ul>
   <li>
    修改环境变量
   </li>
   <li>
    conf目录下
    <code>
     cp flume-env.sh.template flume-env.sh
    </code>
    ，并修改文件中的JAVA_HOME
   </li>
   <li>
    用
    <code>
     flume-ng version
    </code>
    验证
   </li>
  </ul>
  <h3 id="创建服务器端">
   创建服务器端
  </h3>
  <p>
   新建conf文件指定服务器端配置
  </p>
  <div class="sourceCode" id="cb1">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a><span class="co"># example.conf: A single-node Flume configuration</span></span>
<span id="cb1-2"><a aria-hidden="true" href="#cb1-2" tabindex="-1"></a><span class="co"># Name the components on this agent </span></span>
<span id="cb1-3"><a aria-hidden="true" href="#cb1-3" tabindex="-1"></a><span class="ex">a1.sources</span> = r1 </span>
<span id="cb1-4"><a aria-hidden="true" href="#cb1-4" tabindex="-1"></a><span class="ex">a1.sinks</span> = k1 </span>
<span id="cb1-5"><a aria-hidden="true" href="#cb1-5" tabindex="-1"></a><span class="ex">a1.channels</span> = c1</span>
<span id="cb1-6"><a aria-hidden="true" href="#cb1-6" tabindex="-1"></a><span class="co"># Describe/configure the source </span></span>
<span id="cb1-7"><a aria-hidden="true" href="#cb1-7" tabindex="-1"></a><span class="ex">a1.sources.r1.type</span> = netcat </span>
<span id="cb1-8"><a aria-hidden="true" href="#cb1-8" tabindex="-1"></a><span class="ex">a1.sources.r1.bind</span> = localhost </span>
<span id="cb1-9"><a aria-hidden="true" href="#cb1-9" tabindex="-1"></a><span class="ex">a1.sources.r1.port</span> = 44444</span>
<span id="cb1-10"><a aria-hidden="true" href="#cb1-10" tabindex="-1"></a><span class="co"># Describe the sink </span></span>
<span id="cb1-11"><a aria-hidden="true" href="#cb1-11" tabindex="-1"></a><span class="ex">a1.sinks.k1.type</span> = logger</span>
<span id="cb1-12"><a aria-hidden="true" href="#cb1-12" tabindex="-1"></a><span class="co"># Use a channel which buffers events in memory </span></span>
<span id="cb1-13"><a aria-hidden="true" href="#cb1-13" tabindex="-1"></a><span class="ex">a1.channels.c1.type</span> = memory </span>
<span id="cb1-14"><a aria-hidden="true" href="#cb1-14" tabindex="-1"></a><span class="ex">a1.channels.c1.capacity</span> = 1000 </span>
<span id="cb1-15"><a aria-hidden="true" href="#cb1-15" tabindex="-1"></a><span class="ex">a1.channels.c1.transactionCapacity</span> = 100</span>
<span id="cb1-16"><a aria-hidden="true" href="#cb1-16" tabindex="-1"></a><span class="co"># Bind the source and sink to the channel </span></span>
<span id="cb1-17"><a aria-hidden="true" href="#cb1-17" tabindex="-1"></a><span class="ex">a1.sources.r1.channels</span> = c1 </span>
<span id="cb1-18"><a aria-hidden="true" href="#cb1-18" tabindex="-1"></a><span class="ex">a1.sinks.k1.channel</span> = c1</span></code></pre>
  </div>
  <p>
   用如下命令运行
  </p>
  <div class="sourceCode" id="cb2">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a><span class="ex">../bin/flume-ng</span> agent <span class="at">--conf</span> conf/ <span class="at">--conf-file</span> example.conf <span class="at">--name</span> a1 Dflume.root.logger=INFO,console</span></code></pre>
  </div>
  <p>
   其中
   <code>
    --conf
   </code>
   or
   <code>
    -c
   </code>
   指定的是配置目录，
   <code>
    --conf-file
   </code>
   or
   <code>
    -f
   </code>
   指定agent的配置文件
  </p>
  <p>
   另一份服务器端配置示例
  </p>
  <div class="sourceCode" id="cb3">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a><span class="co"># Define a memory channel called ch1 on agent1 </span></span>
<span id="cb3-2"><a aria-hidden="true" href="#cb3-2" tabindex="-1"></a><span class="ex">agent1.channels.ch1.type</span> = memory </span>
<span id="cb3-3"><a aria-hidden="true" href="#cb3-3" tabindex="-1"></a><span class="ex">agent1.channels.ch1.capacity</span> = 100000 </span>
<span id="cb3-4"><a aria-hidden="true" href="#cb3-4" tabindex="-1"></a><span class="ex">agent1.channels.ch1.transactionCapacity</span> = 100000 </span>
<span id="cb3-5"><a aria-hidden="true" href="#cb3-5" tabindex="-1"></a><span class="ex">agent1.channels.ch1.keep-alive</span> = 30 </span>
<span id="cb3-6"><a aria-hidden="true" href="#cb3-6" tabindex="-1"></a><span class="co">#define source monitor a file </span></span>
<span id="cb3-7"><a aria-hidden="true" href="#cb3-7" tabindex="-1"></a><span class="ex">agent1.sources.avro-source1.type</span> = exec </span>
<span id="cb3-8"><a aria-hidden="true" href="#cb3-8" tabindex="-1"></a><span class="ex">agent1.sources.avro-source1.shell</span> = /bin/bash <span class="at">-c</span> </span>
<span id="cb3-9"><a aria-hidden="true" href="#cb3-9" tabindex="-1"></a><span class="ex">agent1.sources.avro-source1.command</span> = tail <span class="at">-n</span> +0 <span class="at">-F</span> /home/storm/tmp/id.txt </span>
<span id="cb3-10"><a aria-hidden="true" href="#cb3-10" tabindex="-1"></a><span class="ex">agent1.sources.avro-source1.channels</span> = ch1 </span>
<span id="cb3-11"><a aria-hidden="true" href="#cb3-11" tabindex="-1"></a><span class="ex">agent1.sources.avro-source1.threads</span> = 5 </span>
<span id="cb3-12"><a aria-hidden="true" href="#cb3-12" tabindex="-1"></a><span class="co"># Define a logger sink that simply logs all events it receives </span></span>
<span id="cb3-13"><a aria-hidden="true" href="#cb3-13" tabindex="-1"></a><span class="co"># and connect it to the other end of the same channel. </span></span>
<span id="cb3-14"><a aria-hidden="true" href="#cb3-14" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.channel</span> = ch1 </span>
<span id="cb3-15"><a aria-hidden="true" href="#cb3-15" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.type</span> = hdfs </span>
<span id="cb3-16"><a aria-hidden="true" href="#cb3-16" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.path</span> = hdfs://192.168.1.111:8020/flumeTest </span>
<span id="cb3-17"><a aria-hidden="true" href="#cb3-17" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.writeFormat</span> = Text </span>
<span id="cb3-18"><a aria-hidden="true" href="#cb3-18" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.fileType</span> = DataStream </span>
<span id="cb3-19"><a aria-hidden="true" href="#cb3-19" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.rollInterval</span> = 0 </span>
<span id="cb3-20"><a aria-hidden="true" href="#cb3-20" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.rollSize</span> = 1000000 </span>
<span id="cb3-21"><a aria-hidden="true" href="#cb3-21" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.rollCount</span> = 0 </span>
<span id="cb3-22"><a aria-hidden="true" href="#cb3-22" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.batchSize</span> = 1000 </span>
<span id="cb3-23"><a aria-hidden="true" href="#cb3-23" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.txnEventMax</span> = 1000 </span>
<span id="cb3-24"><a aria-hidden="true" href="#cb3-24" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.callTimeout</span> = 60000 </span>
<span id="cb3-25"><a aria-hidden="true" href="#cb3-25" tabindex="-1"></a><span class="ex">agent1.sinks.log-sink1.hdfs.appendTimeout</span> = 60000 </span>
<span id="cb3-26"><a aria-hidden="true" href="#cb3-26" tabindex="-1"></a><span class="co"># Finally, now that we've defined all of our components, tell </span></span>
<span id="cb3-27"><a aria-hidden="true" href="#cb3-27" tabindex="-1"></a><span class="co"># agent1 which ones we want to activate. </span></span>
<span id="cb3-28"><a aria-hidden="true" href="#cb3-28" tabindex="-1"></a><span class="ex">agent1.channels</span> = ch1 </span>
<span id="cb3-29"><a aria-hidden="true" href="#cb3-29" tabindex="-1"></a><span class="ex">agent1.sources</span> = avro-source1 </span>
<span id="cb3-30"><a aria-hidden="true" href="#cb3-30" tabindex="-1"></a><span class="ex">agent1.sinks</span> = log-sink1</span></code></pre>
  </div>
  <h3 id="创建客户端">
   创建客户端
  </h3>
  <p>
   由于示例中的服务端srouce
type是netcat，所以客户端可以通过一个简单的
   <code>
    talnet
   </code>
   命令实现
  </p>
  <div class="sourceCode" id="cb4">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a aria-hidden="true" href="#cb4-1" tabindex="-1"></a><span class="ex">talnet</span> localhost 44444</span></code></pre>
  </div>
  <h1 id="flume组件详解">
   FLume组件详解
  </h1>
  <ul>
   <li>
    Event：一个数据单元，带有一个可选的消息头，可以是日志记录、 avro
对象等
    <ul>
     <li>
      对于文本文件通常为一行记录
     </li>
    </ul>
   </li>
   <li>
    Flow：Event 从源点到达目的点的迁移的抽象
   </li>
  </ul>
  <h2 id="agent">
   Agent
  </h2>
  <h3 id="source">
   Source
  </h3>
  <ul>
   <li>
    <p>
     Avro Source
    </p>
   </li>
   <li>
    <p>
     Exce Source：指定某Shell命令的stdout作为输入
    </p>
    <ul>
     <li>
      如常用的
      <code>
       tail -F [File]
      </code>
     </li>
     <li>
      可以实现实时传输，但在 flume
不运行和脚本错误时，会丢数据，也不支持断点续传功能，且由于没有“记忆”，所以不知道上一次传到哪里了
     </li>
     <li>
      有execStream的扩展
     </li>
    </ul>
   </li>
   <li>
    <p>
     Spooling Directory Sourc
    </p>
    <ul>
     <li>
      监听某目录，该目录不可包含子目录，拷贝到该目录的文件不可再打开编辑
     </li>
     <li>
      实践中可以结合log4j使用，将文件分割机制设为1分钟一次，并拷贝到spool的监控目录
     </li>
     <li>
      Flume 在传完文件之后，将会修改文件的后
缀，变为.COMPLETED（后缀也可以在配置文件中灵活指定）
     </li>
    </ul>
   </li>
   <li>
    <p>
     NetCat Source
    </p>
   </li>
   <li>
    <p>
     Taidir Source
    </p>
    <ul>
     <li>
      Watch the specified files, and tail them in nearly real-time once
detected new lines appended to the each files. If the new lines are
being written, this source will retry reading them in wait for the
completion of the write.
     </li>
    </ul>
   </li>
   <li>
    <p>
     Syslog Source
    </p>
   </li>
   <li>
    <ul>
     <li>
      有Syslog TCP Source和Syslog UDP Source
     </li>
    </ul>
   </li>
   <li>
    <p>
     JMS Source
    </p>
    <ul>
     <li>
      从Java Message Service获取数据输入Channel
     </li>
    </ul>
   </li>
   <li>
    <p>
     Kafka Source：内置Kafka
Comsumer，从Kafka读取某个topic数据写入Channel
    </p>
   </li>
   <li>
    <p>
     其他的还有如HTTP Source、HDFS Source等
    </p>
   </li>
  </ul>
  <p>
   如果内置的Source无法满足需要， Flume还支持自定义Source。
  </p>
  <h3 id="channel">
   Channel
  </h3>
  <ul>
   <li>
    Memory Channel：更高的吞吐，更低的数据完整性保障
   </li>
   <li>
    JDBC Channel
    <ul>
     <li>
      内置支持Derby
     </li>
    </ul>
   </li>
   <li>
    File Channel
    <ul>
     <li>
      持久化所有的事件，并将其存储到磁盘 中
     </li>
     <li>
      即使 Java
虚拟机宕掉，或者操作系统崩溃或重启，再或者事件没有在管道中成功
地传递到下一个代理（agent），这一切都不会造成数据丢失。
     </li>
    </ul>
   </li>
   <li>
    Psuedo Transaction Channel
    <ul>
     <li>
      用于测试
     </li>
    </ul>
   </li>
   <li>
    Spillable Memory Channel
   </li>
  </ul>
  <h3 id="sink">
   Sink
  </h3>
  <ul>
   <li>
    HDFS sink
   </li>
   <li>
    Logger sink
    <ul>
     <li>
     </li>
    </ul>
   </li>
   <li>
    Avro sink
    <ul>
     <li>
      数据被转换成 Avro Event，然后发送到配置的 RPC 端口上
     </li>
     <li>
      Thirft Sink类似
     </li>
    </ul>
   </li>
   <li>
    IRC Sink
    <ul>
     <li>
      在IRC上进行回放
     </li>
    </ul>
   </li>
   <li>
    File Roll sink
    <ul>
     <li>
      存储数据到本地文件系统
     </li>
    </ul>
   </li>
   <li>
    Null sink
    <ul>
     <li>
      丢弃所有数据
     </li>
    </ul>
   </li>
   <li>
    HBase sink
   </li>
  </ul>
  <p>
   Flume
Sink在设置存储数据时，可以向文件系统中，数据库中，hadoop中储数据，在日志数据较少时，可以将数据存储在文件系中，并且设定一定的时间间隔保存数据。在日志数据较多时，可以将相应的日志数据存储到Hadoop中，便于日后进行相应的数据分析。
  </p>
  <h2 id="collector">
   Collector
  </h2>
  <p>
   用于对数据进行聚合。
  </p>
  <h1 id="setup1">
   Setup
   <a class="footnote-ref" href="#fn1" id="fnref1" role="doc-noteref">
    <sup>
     1
    </sup>
   </a>
  </h1>
  <h2 id="single-agent">
   Single Agent
  </h2>
  <h3 id="trigger">
   Trigger
  </h3>
  <ul>
   <li>
    SizeTrigger
    <ul>
     <li>
      在调用 HDFS 输出流写的同时，count 该流已经写入的大小总和，若超过
一定大小，则创建新的文件和输出流，写入操作指向新的输出流，同时 close
以前的输 出流
     </li>
    </ul>
   </li>
   <li>
    TimeTrigger
    <ul>
     <li>
      开启定时器，当到达该点时，自动创建新的文件和输出流，新的写入重定
向到该流中，同时 close 以前的输出流
     </li>
    </ul>
   </li>
  </ul>
  <h2 id="data-ingestion">
   Data ingestion
  </h2>
  <h2 id="multi-agent-flow">
   Multi-agent flow
  </h2>
  <blockquote>
   <p>
    In order to flow the data across multiple agents or hops, the sink of
the previous agent and source of the current hop need to be avro type
with the sink pointing to the hostname (or IP address) and port of the
source.
   </p>
  </blockquote>
  <p>
   <img src="C:/Users/Five/Desktop/note/img/UserGuide_image03.png"/>
  </p>
  <h2 id="consolidation">
   Consolidation
  </h2>
  <blockquote>
   <p>
    A very common scenario in log collection is a large number of log
producing clients sending data to a few consumer agents that are
attached to the storage subsystem. For example, logs collected from
hundreds of web servers sent to a dozen of agents that write to HDFS
cluster.
   </p>
  </blockquote>
  <p>
   <img src="C:/Users/Five/Desktop/note/img/UserGuide_image02.png"/>
  </p>
  <h2 id="multiplexing-the-flow">
   multiplexing the flow
  </h2>
  <p>
   <img src="C:/Users/Five/Desktop/note/img/UserGuide_image01.png"/>
  </p>
  <h1 id="flume-vs-kafka">
   Flume vs Kafka
  </h1>
  <p>
   有各种极端对立的观点
  </p>
  <ul>
   <li>
    有的认为Flume和Kafka差别很大，使用场景差异也很大
   </li>
   <li>
    有的认为Flume和Kafka本身是很相似的系统，都能无压力传输很大的数据量
   </li>
  </ul>
  <ol type="1">
   <li>
    Kafka是pull based, 如果你有很多下游的Data Consumer，用Kafka；
   </li>
   <li>
    Kafka有Replication，Flume没有，如果要求很高的容错性(Data High
Availability)，选kafka；
   </li>
   <li>
    需要更好的Hadoop类产品接口，例如HDFS，HBase等，用Flume。
   </li>
  </ol>
  <h2 id="整合flume和kafka">
   整合Flume和Kafka
  </h2>
  <ul>
   <li>
    自定义KafkaSink
   </li>
   <li>
    配置Agent
   </li>
   <li>
    KafkaSpoutTest
   </li>
   <li>
    KafkaTopologyTest
   </li>
  </ul>
  <h2 id="storm-flume-kafka2">
   Storm-Flume-Kafka
   <a class="footnote-ref" href="#fn2" id="fnref2" role="doc-noteref">
    <sup>
     2
    </sup>
   </a>
  </h2>
  <p>
   <img src="C:/Users/Five/Desktop/note/img/650365-20190429173653211-1906011450.jpg"/>
  </p>
  <p>
   采集层：实现日志收集，使用负载均衡策略
  </p>
  <p>
   消息队列：作用是解耦及不同速度系统缓冲
  </p>
  <p>
   实时处理单元：用Storm来进行数据处理，最终数据流入DB中
  </p>
  <p>
   展示单元：数据可视化，使用WEB框架展示
  </p>
  <p>
   <img src="C:/Users/Five/Desktop/note/img/650365-20190429173726685-968002116.jpg"/>
  </p>
  <h1 id="debug日志">
   Debug日志
  </h1>
  <p>
   java.lang.OutOfMemoryError: Java heap space
  </p>
  <p>
   在conf目录的flume-env.sh文件中可以设置JAVA_OPTS。
  </p>
  <section class="footnotes footnotes-end-of-document" id="footnotes" role="doc-endnotes">
   <hr/>
   <ol>
    <li id="fn1">
     <p>
      http://flume.apache.org/releases/content/1.9.0/FlumeUserGuide.html
      <a class="footnote-back" href="#fnref1" role="doc-backlink">
       ↩︎
      </a>
     </p>
    </li>
    <li id="fn2">
     <p>
      https://www.cnblogs.com/cac2020/p/10791843.html
      <a class="footnote-back" href="#fnref2" role="doc-backlink">
       ↩︎
      </a>
     </p>
    </li>
   </ol>
  </section>
 </body>
</html>

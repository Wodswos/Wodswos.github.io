<!DOCTYPE html>
<html lang="" xml:lang="" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta charset="utf-8"/>
  <meta content="pandoc" name="generator"/>
  <meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport"/>
  <meta content="fivezehua@qq.com" name="author"/>
  <title>
   Storm
  </title>
  <style>
   html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
   #TOC {
    border-left: gray 2px dashed;
    padding: 5px;
    margin: 2%;

    right: 0;
    position: fixed;
    top: 5%;
    max-height: 90%;

    overflow: scroll;
  }
  #TOC::-webkit-scrollbar{
    width: 0!important;
  }
  #TOC a {
    color: #222222;
    font-size: 14px;
  }
  

    #main-navigation{
        position:fixed;
        left: 0;
        top: 0;
        width: 100%;

        z-index: 999;
    }

    #navigation-list-wrapper{
        display: flex;
        background-color: #ffffff;
        height: 35px;

        font-family: 'Times New Roman';
        font-size: 15px;
    }
    .main-topic-div{
        height: 40px;
        font-size: 20px;
    }

        .web-header{
          text-decoration: none;
          font-size: 25px;
        }

        .hutao-img{
            /* margin-right: 2%; */
            height: 30px;
            width: 30px;
            border-radius: 5px;
            margin-right: 5px;
        }

    .navigation-topic{
        /* display: inline; */
        background-color: #fdfdfd;
        border: #fdfdfd;
        font-size: 10px;
        overflow: hidden;
        margin-left: 2%;

        flex: 1;
    }
    .navigation-topic:hover{
        overflow: visible;
    }

    .drop-item, .main-topic-div{
        padding: 2px;
        background-color: #ffffff;
    }

    .drop-item a, .main-topic-div a{
        text-decoration: none;
        border-radius: 5px;
        font-size: 15px;
    }
    .drop-item a:hover, .main-topic-div a:hover{
        background-color: #e6e6e6;
    }


    #sub-navigation{
        border-right: #e6e6e6 solid 1px;
        position: fixed;
        left: 0;
        max-height: 90%;
        max-width: 20%;

        overflow: scroll;
    }
    #sub-navigation::-webkit-scrollbar{
        width: 0!important;
      }
    #sub-navigation li{
        list-style: none;
    }
    #sub-navigation a{
        color: #222222;
        text-decoration: none;
        font-size: 12px;
    }
    #sub-navigation a:hover{
        color: #606060;
        text-decoration: underline;
    }
    #current-path{
        background-color: #e6e6e6;
        border-top: #aaaaaa solid 1px;
        border-bottom: #aaaaaa solid 1px;
    }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
 </head>
 <body>
  <tag id="sub-navigation">
   <li>
    <a href="https://wodswos.github.io/03-分布式系统和并行计算/index.html">
     03-分布式系统和并行计算
    </a>
    <ul>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/index.html">
       00-并行计算
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/00-指令粒度的并行运算.html">
         00-指令粒度的并行运算.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/index.html">
         index.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/index.html">
       01-分布式和一致性
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/01-CAP.html">
         01-CAP.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/01-分布式和现代架构.html">
         01-分布式和现代架构.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/02-分布式存储.html">
         02-分布式存储.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/03-分布式计算.html">
         03-分布式计算.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/index.html">
         index.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/index.html">
       02-分布式通信和协同
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/0x-RPC.html">
         0x-RPC.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/Apache Beam.html">
         Apache Beam.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/消息队列.html">
         消息队列.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/index.html">
       0x-主流实现和应用
      </a>
      <ul>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Flume.html">
         Flume.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Hadoop.html">
         Hadoop.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Kafka.html">
         Kafka.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Sqoop.html">
         Sqoop.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Storm.html">
         Storm.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/Storm速览.html">
         Storm速览.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/zookeeper vs mq.html">
         zookeeper vs mq.html
        </a>
       </li>
       <li>
        <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/zookeeper.html">
         zookeeper.html
        </a>
       </li>
      </ul>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-云计算.html">
       0x-云计算.html
      </a>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-算一笔帐-量化计算机资源.html">
       0x-算一笔帐-量化计算机资源.html
      </a>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-边缘计算.html">
       0x-边缘计算.html
      </a>
     </li>
     <li>
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/index.html">
       index.html
      </a>
     </li>
    </ul>
   </li>
  </tag>
  <div id="main-navigation">
   <div id="navigation-list-wrapper">
    <a class="web-header" href="https://wodswos.github.io">
     <img alt="hutao-img" class="hutao-img" src="https://zehua-markdown.oss-cn-shanghai.aliyuncs.com/logo.jpg"/>
     zehua's website
    </a>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/01-数理基础/index.html">
       数理基础
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/00-数学史概要.html">
       数学史概要
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/01-数理且哲学66/index.html">
       01-数理且哲学66
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/02-变化且分析77/index.html">
       02-变化且分析77
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/03-结构且代数88/index.html">
       03-结构且代数88
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/04-随机且统计99/index.html">
       04-随机且统计99
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/05-其他/index.html">
       05-其他
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/06-应用数学-信息论和编码/index.html">
       06-应用数学-信息论和编码
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/06-物理/index.html">
       06-物理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/supplement-关于数学符号.html">
       关于数学符号
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/01-数理基础/supplement-关于追问本质和追问直观.html">
       关于追问本质和追问直观
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/02-计算机科学基础/index.html">
       计算机科学基础
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0-天才们的构思-计算机的理论大厦/index.html">
       0-天才们的构思-计算机的理论大厦
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0x-《Crash Course Computer Science》笔记.html">
       《Crash Course Computer Science》笔记
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0x-从半导体萌芽到互联网时代的所有巨头.html">
       从半导体萌芽到互联网时代的所有巨头
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/0x-模拟计算机会卷土重来吗？.html">
       模拟计算机会卷土重来吗？
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/1-硬件族谱-计算机组成原理/index.html">
       1-硬件族谱-计算机组成原理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/2-面向硬件编程-从汇编到C/index.html">
       2-面向硬件编程-从汇编到C
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/3-硬件资源的统一管理-操作系统/index.html">
       3-硬件资源的统一管理-操作系统
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/4-面向编译器和解释器编程-高级计算机语言/index.html">
       4-面向编译器和解释器编程-高级计算机语言
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/5-计算科学的艺术-数据结构与算法/index.html">
       5-计算科学的艺术-数据结构与算法
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/6-信息革命-计算机网络/index.html">
       6-信息革命-计算机网络
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/7-设计和架构-软件工程瞎扯淡/index.html">
       7-设计和架构-软件工程瞎扯淡
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/8-拾遗和杂谈/index.html">
       8-拾遗和杂谈
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/02-计算机科学基础/计算机编年史.html">
       计算机编年史
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/index.html">
       分布式系统和并行计算
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/00-并行计算/index.html">
       00-并行计算
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/01-分布式和一致性/index.html">
       01-分布式和一致性
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/02-分布式通信和协同/index.html">
       02-分布式通信和协同
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-主流实现和应用/index.html">
       0x-主流实现和应用
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-云计算.html">
       云计算
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-算一笔帐-量化计算机资源.html">
       算一笔帐-量化计算机资源
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/03-分布式系统和并行计算/0x-边缘计算.html">
       边缘计算
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/index.html">
       人工智能之机器学习
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/0-人工智能先验知识和早期实践/index.html">
       0-人工智能先验知识和早期实践
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/1.1-监督学习/index.html">
       1.1-监督学习
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/1.2-无监督学习/index.html">
       1.2-无监督学习
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/2-关联分析-不知道是什么东西/index.html">
       2-关联分析-不知道是什么东西
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/2-实践篇-数据预处理/index.html">
       2-实践篇-数据预处理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/x-Python的机器学习库.html">
       Python的机器学习库
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/04-人工智能之机器学习/损失函数的设计.html">
       损失函数的设计
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/05-深度学习方法/index.html">
       深度学习方法
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/0-神经网络基础/index.html">
       0-神经网络基础
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/0-神经网络框架和工具实践/index.html">
       0-神经网络框架和工具实践
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/2.1-应用-数字图像处理和计算机视觉：数字图像处理/index.html">
       2.1-应用-数字图像处理和计算机视觉：数字图像处理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/2.2-应用-数字图像处理和计算机视觉：计算机视觉/index.html">
       2.2-应用-数字图像处理和计算机视觉：计算机视觉
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/2.3-应用-自然语言处理/index.html">
       2.3-应用-自然语言处理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/x-脉冲神经网络.html">
       脉冲神经网络
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/05-深度学习方法/生活里的“智能”和“迷惑行为”.html">
       生活里的“智能”和“迷惑行为”
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/index.html">
       工欲善其事必先利其器
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/0.0-Plan/index.html">
       0.0-Plan
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Git-Action-Workflow和持续集成.html">
       Action-Workflow和持续集成
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Git-项目协同的典范.html">
       项目协同的典范
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Linux/index.html">
       Linux
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Python-胶水和自动化/index.html">
       Python-胶水和自动化
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/Visio.html">
       Visio
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/代码复用和包管理工具.html">
       代码复用和包管理工具
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/收纳和整理.html">
       收纳和整理
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/06-工欲善其事必先利其器/笔记：从信息到知识，从编辑到管理/index.html">
       笔记：从信息到知识，从编辑到管理
      </a>
     </div>
    </div>
    <div class="navigation-topic">
     <div class="main-topic-div">
      <a href="https://wodswos.github.io/07-技多不压身/index.html">
       技多不压身
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.0-哲学和认知/index.html">
       0.0-哲学和认知
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.1-生命、人类、社会/index.html">
       0.1-生命、人类、社会
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.2-社会分配：政治、经济/index.html">
       0.2-社会分配：政治、经济
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/0.3-系统科学/index.html">
       0.3-系统科学
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/1.1-英语/index.html">
       1.1-英语
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/1.2-读书笔记/index.html">
       1.2-读书笔记
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/1.3-养生式健身/index.html">
       1.3-养生式健身
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/2.1-干饭人干饭魂/index.html">
       2.1-干饭人干饭魂
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/2.2-关于文字/index.html">
       2.2-关于文字
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/2.2-独立生活/index.html">
       2.2-独立生活
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/3.1-吃喝玩乐/index.html">
       3.1-吃喝玩乐
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/s-fiction/index.html">
       s-fiction
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/打工人的事情：劳务和社保.html">
       打工人的事情：劳务和社保
      </a>
     </div>
     <div class="drop-item">
      <a href="https://wodswos.github.io/07-技多不压身/护肤基础常识.html">
       护肤基础常识
      </a>
     </div>
    </div>
   </div>
   <div id="current-path">
   </div>
  </div>
  <header id="title-block-header">
   <h1 class="title">
    Storm
   </h1>
   <p class="author">
    fivezehua@qq.com
   </p>
  </header>
  <nav id="TOC" role="doc-toc">
   <ul>
    <li>
     <a href="#storm集群" id="toc-storm集群">
      Storm集群
     </a>
     <ul>
      <li>
       <a href="#物理部署" id="toc-物理部署">
        物理部署
       </a>
       <ul>
        <li>
         <a href="#配置基本环境" id="toc-配置基本环境">
          配置基本环境
         </a>
        </li>
        <li>
         <a href="#修改config文件storm.yaml" id="toc-修改config文件storm.yaml">
          修改config文件storm.yaml
         </a>
        </li>
        <li>
         <a href="#启动storm" id="toc-启动storm">
          启动storm
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#节点组成" id="toc-节点组成">
        节点组成
       </a>
       <ul>
        <li>
         <a href="#nimbus" id="toc-nimbus">
          Nimbus
         </a>
        </li>
        <li>
         <a href="#supervisor" id="toc-supervisor">
          Supervisor
         </a>
        </li>
        <li>
         <a href="#zookeeper-cluster" id="toc-zookeeper-cluster">
          Zookeeper
Cluster
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li>
     <a href="#storm-topology" id="toc-storm-topology">
      Storm Topology
     </a>
     <ul>
      <li>
       <a href="#集群和topology的交点" id="toc-集群和topology的交点">
        集群和Topology的交点
       </a>
      </li>
      <li>
       <a href="#组成和结构" id="toc-组成和结构">
        组成和结构
       </a>
       <ul>
        <li>
         <a href="#spout和bolt" id="toc-spout和bolt">
          Spout和Bolt
         </a>
        </li>
        <li>
         <a href="#stream和tuple" id="toc-stream和tuple">
          Stream和Tuple
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#管理和运行" id="toc-管理和运行">
        管理和运行
       </a>
       <ul>
        <li>
         <a href="#本地提交" id="toc-本地提交">
          本地提交
         </a>
        </li>
        <li>
         <a href="#远程提交" id="toc-远程提交">
          远程提交
         </a>
        </li>
        <li>
         <a href="#运行命令" id="toc-运行命令">
          运行命令
         </a>
        </li>
        <li>
         <a href="#topology管理" id="toc-topology管理">
          Topology管理
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#简单topology实现" id="toc-简单topology实现">
        简单Topology实现
       </a>
       <ul>
        <li>
         <a href="#maven依赖" id="toc-maven依赖">
          maven依赖
         </a>
        </li>
        <li>
         <a href="#topology" id="toc-topology">
          Topology
         </a>
        </li>
        <li>
         <a href="#submission-local" id="toc-submission-local">
          Submission
(Local)
         </a>
        </li>
        <li>
         <a href="#topology-submission-real-distributedremote" id="toc-topology-submission-real-distributedremote">
          Topology Submission
(Real-Distributed/Remote)
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li>
     <a href="#其他" id="toc-其他">
      其他
     </a>
     <ul>
      <li>
       <a href="#the-parallelism" id="toc-the-parallelism">
        The
Parallelism
       </a>
      </li>
      <li>
       <a href="#reliable-processing-of-messages" id="toc-reliable-processing-of-messages">
        Reliable Processing of
Messages
       </a>
       <ul>
        <li>
         <a href="#acker" id="toc-acker">
          acker
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#dispatcher-and-scheduler" id="toc-dispatcher-and-scheduler">
        Dispatcher and Scheduler
       </a>
      </li>
      <li>
       <a href="#trident" id="toc-trident">
        Trident
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </nav>
  <h1 id="storm集群">
   Storm集群
  </h1>
  <h2 id="物理部署">
   物理部署
  </h2>
  <h3 id="配置基本环境">
   配置基本环境
  </h3>
  <p>
   JDK，Zookeeper等
  </p>
  <h3 id="修改config文件storm.yaml">
   修改config文件storm.yaml
  </h3>
  <blockquote>
   <p>
    配置具有如下优先级：
   </p>
   <p>
    <code>
     defaults.yaml
    </code>
    &lt;
    <code>
     storm.yaml
    </code>
    &lt;
    <code>
     topology-specifi configuration
    </code>
    &lt;
    <code>
     internal component-specific configuration
    </code>
    &lt;
    <code>
     external component-specific configuration
    </code>
   </p>
  </blockquote>
  <h3 id="启动storm">
   启动storm
  </h3>
  <div class="sourceCode" id="cb1">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a><span class="fu">nohup</span> storm nimbus/supervisor/ui <span class="op">&gt;</span>/dev/null <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="kw">&amp;</span></span></code></pre>
  </div>
  <p>
   后台运行且不输出信息（重定向到Linux黑洞）。
  </p>
  <h2 id="节点组成">
   节点组成
  </h2>
  <h3 id="nimbus">
   Nimbus
  </h3>
  <p>
   The master in Storm cluster.
  </p>
  <ul>
   <li>
    fail-fast
   </li>
  </ul>
  <p>
   It can be restarted without having any effects on the already running
tasks on the worker node.
  </p>
  <p>
   Unlike hadoop that all running jobs are left in an inconsistent state
when JobTracker dies.
  </p>
  <h3 id="supervisor">
   Supervisor
  </h3>
  <p>
   The worker nodes in Storm cluster.
  </p>
  <p>
   <img src="https://zehua-markdown.oss-cn-shanghai.aliyuncs.com/img/x-02.png"/>
  </p>
  <h4 id="worker进程级">
   Worker（进程级）
  </h4>
  <h4 id="excutor和task线程级">
   Excutor和Task（线程级）
  </h4>
  <p>
   每个executor只会运行1个topology的1个component(spout或bolt)的task，但task的数量没有限制（只要是同一个component），storm默认是1个component只生成1个task，executor线程里会在每次循环里顺序调用所有task实例
  </p>
  <h3 id="zookeeper-cluster">
   Zookeeper Cluster
  </h3>
  <p>
   Storm uses a Zookeeper cluster to coordinate various process.
  </p>
  <ul>
   <li>
    zookeeper中有workerbeats节点记录所有worker的心跳。
   </li>
   <li>
    assignments节点中保存了所有Topology的任务分配信息、代码存储目录、任务间的关联信息
    <ul>
     <li>
      Supervisor轮询此节点领取任务
     </li>
    </ul>
   </li>
   <li>
    还有backpressure,erros,blobstore,leader-lock,logconfigs,nimbuses,supervisors等节点记录各种信息
   </li>
  </ul>
  <figure>
   <img alt="image-20200929085535057" src="https://zehua-markdown.oss-cn-shanghai.aliyuncs.com/img/x-01.png"/>
   <figcaption aria-hidden="true">
    image-20200929085535057
   </figcaption>
  </figure>
  <h1 id="storm-topology">
   Storm Topology
  </h1>
  <p>
   Topology是Storm的逻辑运行结构
  </p>
  <h2 id="集群和topology的交点">
   集群和Topology的交点
  </h2>
  <p>
   Topology由Nimbus管理，Supervisor运行
  </p>
  <h2 id="组成和结构">
   组成和结构
  </h2>
  <h3 id="spout和bolt">
   Spout和Bolt
  </h3>
  <p>
   The source of tuples in a storm topology. It is responsible for
reading or listening to data from an external source.
  </p>
  <ul>
   <li>
    Reading from a logfile
   </li>
   <li>
    Listening for new messages in a queue
   </li>
  </ul>
  <p>
   And then publishing them - emitting. Here are some important methods
of spout:
  </p>
  <ul>
   <li>
    nextTuple(): Define the logic of reading data and emiting them.
    <ul>
     <li>
      backtype.storm.spout.ISpoutOutputCollector
     </li>
    </ul>
   </li>
   <li>
    ack():Invoked by storm when it identifies that tuple has not been
processed successfully.
   </li>
   <li>
    fail()
   </li>
   <li>
    open()
   </li>
  </ul>
  <p>
   A bolt is the processing powerhouse of a Storm topology and is
responsible for transforming a stream.
  </p>
  <p>
   Bolt类的主要方法和函数：
  </p>
  <ul>
   <li>
    execute(Tuple input): The most important method which is executed
for each tuple that comes through the subscribed input streams.
   </li>
  </ul>
  <h3 id="stream和tuple">
   Stream和Tuple
  </h3>
  <p>
   Spout和Bolt是从相对静态的角度看Topology，而Stream和Tuple则是从相对动态的角度看待Topology。
  </p>
  <p>
   The stream is the core abstraction in Storm. A stream is an unbounded
sequence of tuples that is processed and created in parallel in a
distributed fashion.
  </p>
  <p>
   Streams are defined with a schema that names the fields in the
stream’s tuples. By default, tuples can contain integers, longs, shorts,
bytes, strings, doubles, floats, booleans, and byte arrays. You can also
define your own serializers so that custom types can be used natively
within tuples.
  </p>
  <h2 id="管理和运行">
   管理和运行
  </h2>
  <h3 id="本地提交">
   本地提交
  </h3>
  <p>
   Storm topologies run on local machine in a single JVM.
  </p>
  <p>
   This mode is used for the testing and debugging of a topology.
  </p>
  <div class="sourceCode" id="cb2">
   <pre class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a>LocalCluster cluster <span class="op">=</span> <span class="kw">new</span> <span class="fu">LocalCluster</span><span class="op">();</span></span>
<span id="cb2-2"><a aria-hidden="true" href="#cb2-2" tabindex="-1"></a>cluster<span class="op">.</span><span class="fu">submitTopology</span><span class="op">(</span>TOPOLOGY_NAME<span class="op">,</span> conf<span class="op">,</span> builder<span class="op">.</span><span class="fu">createTopology</span><span class="op">());</span></span>
<span id="cb2-3"><a aria-hidden="true" href="#cb2-3" tabindex="-1"></a><span class="bu">Thread</span><span class="op">.</span><span class="fu">sleep</span><span class="op">(</span><span class="dv">2000</span><span class="op">);</span></span>
<span id="cb2-4"><a aria-hidden="true" href="#cb2-4" tabindex="-1"></a>cluster<span class="op">.</span><span class="fu">shutdown</span><span class="op">();</span></span></code></pre>
  </div>
  <h3 id="远程提交">
   远程提交
  </h3>
  <ol type="1">
   <li>
    Storm提交后，把代码首先存放到Nimbus节点的inbox目录下，生成配置文件stormconf.ser、序列化Topology代码文件在stormdist目录下。
   </li>
   <li>
    设定Topology所关联的Spouts和Bolts，可同时设置executor和task数目。
   </li>
   <li>
    Nimbus将工作提交到zookeeper。
   </li>
   <li>
    Supervisor轮询zookeeper集群，领取自己的任务
   </li>
  </ol>
  <div class="sourceCode" id="cb3">
   <pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a>StormSubmitter<span class="op">.</span><span class="fu">submitTopology</span><span class="op">(</span>TOPOLOGY_NAME<span class="op">,</span>conf<span class="op">,</span>builder<span class="op">.</span><span class="fu">createTopology</span><span class="op">());</span></span></code></pre>
  </div>
  <h3 id="运行命令">
   运行命令
  </h3>
  <div class="sourceCode" id="cb4">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a aria-hidden="true" href="#cb4-1" tabindex="-1"></a><span class="ex">storm</span> jar StormTopology.jar mainclass <span class="pp">[</span><span class="ss">args</span><span class="pp">]</span></span></code></pre>
  </div>
  <h3 id="topology管理">
   Topology管理
  </h3>
  <p>
   杀死/停用/启用一个topo
  </p>
  <div class="sourceCode" id="cb5">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a aria-hidden="true" href="#cb5-1" tabindex="-1"></a><span class="ex">storm</span> kill/deactivate/activate topology_name [-w wait_time]</span></code></pre>
  </div>
  <p>
   负载平衡，会先停用拓扑，然后重新分配worker，重启拓扑
  </p>
  <div class="sourceCode" id="cb6">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a aria-hidden="true" href="#cb6-1" tabindex="-1"></a><span class="ex">storm</span> rebalance topology_name </span>
<span id="cb6-2"><a aria-hidden="true" href="#cb6-2" tabindex="-1"></a><span class="ex">[-w</span> wait_time] </span>
<span id="cb6-3"><a aria-hidden="true" href="#cb6-3" tabindex="-1"></a><span class="ex">[-n</span> worker_amount] </span>
<span id="cb6-4"><a aria-hidden="true" href="#cb6-4" tabindex="-1"></a><span class="ex">[-e</span> component_name=executer_amount]</span></code></pre>
  </div>
  <h2 id="简单topology实现">
   简单Topology实现
  </h2>
  <h3 id="maven依赖">
   maven依赖
  </h3>
  <div class="sourceCode" id="cb7">
   <pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb7-1"><a aria-hidden="true" href="#cb7-1" tabindex="-1"></a>&lt;<span class="kw">project</span><span class="ot"> xmlns=</span><span class="st">"http://maven.apache.org/POM/4.0.0"</span><span class="ot"> xmlns:xsi=</span><span class="st">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span id="cb7-2"><a aria-hidden="true" href="#cb7-2" tabindex="-1"></a><span class="ot">  xsi:schemaLocation=</span><span class="st">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
<span id="cb7-3"><a aria-hidden="true" href="#cb7-3" tabindex="-1"></a>  &lt;<span class="kw">modelVersion</span>&gt;4.0.0&lt;/<span class="kw">modelVersion</span>&gt;</span>
<span id="cb7-4"><a aria-hidden="true" href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a aria-hidden="true" href="#cb7-5" tabindex="-1"></a>  &lt;<span class="kw">groupId</span>&gt;storm.test&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb7-6"><a aria-hidden="true" href="#cb7-6" tabindex="-1"></a>  &lt;<span class="kw">artifactId</span>&gt;stormsample&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb7-7"><a aria-hidden="true" href="#cb7-7" tabindex="-1"></a>  &lt;<span class="kw">version</span>&gt;1.0-SNAPSHOT&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb7-8"><a aria-hidden="true" href="#cb7-8" tabindex="-1"></a>  &lt;<span class="kw">packaging</span>&gt;jar&lt;/<span class="kw">packaging</span>&gt;</span>
<span id="cb7-9"><a aria-hidden="true" href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a aria-hidden="true" href="#cb7-10" tabindex="-1"></a>  &lt;<span class="kw">name</span>&gt;stormsample&lt;/<span class="kw">name</span>&gt;</span>
<span id="cb7-11"><a aria-hidden="true" href="#cb7-11" tabindex="-1"></a>  &lt;<span class="kw">url</span>&gt;http://maven.apache.org&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb7-12"><a aria-hidden="true" href="#cb7-12" tabindex="-1"></a></span>
<span id="cb7-13"><a aria-hidden="true" href="#cb7-13" tabindex="-1"></a>  &lt;<span class="kw">properties</span>&gt;</span>
<span id="cb7-14"><a aria-hidden="true" href="#cb7-14" tabindex="-1"></a>    &lt;<span class="kw">project.build.sourceEncoding</span>&gt;UTF-8&lt;/<span class="kw">project.build.sourceEncoding</span>&gt;</span>
<span id="cb7-15"><a aria-hidden="true" href="#cb7-15" tabindex="-1"></a>  &lt;/<span class="kw">properties</span>&gt;</span>
<span id="cb7-16"><a aria-hidden="true" href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a aria-hidden="true" href="#cb7-17" tabindex="-1"></a>  &lt;<span class="kw">dependencies</span>&gt;</span>
<span id="cb7-18"><a aria-hidden="true" href="#cb7-18" tabindex="-1"></a>    &lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb7-19"><a aria-hidden="true" href="#cb7-19" tabindex="-1"></a>      &lt;<span class="kw">groupId</span>&gt;junit&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb7-20"><a aria-hidden="true" href="#cb7-20" tabindex="-1"></a>      &lt;<span class="kw">artifactId</span>&gt;junit&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb7-21"><a aria-hidden="true" href="#cb7-21" tabindex="-1"></a>      &lt;<span class="kw">version</span>&gt;3.8.1&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb7-22"><a aria-hidden="true" href="#cb7-22" tabindex="-1"></a>      &lt;<span class="kw">scope</span>&gt;test&lt;/<span class="kw">scope</span>&gt;</span>
<span id="cb7-23"><a aria-hidden="true" href="#cb7-23" tabindex="-1"></a>    &lt;/<span class="kw">dependency</span>&gt;</span>
<span id="cb7-24"><a aria-hidden="true" href="#cb7-24" tabindex="-1"></a></span>
<span id="cb7-25"><a aria-hidden="true" href="#cb7-25" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt; </span>
<span id="cb7-26"><a aria-hidden="true" href="#cb7-26" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.apache.storm&lt;/<span class="kw">groupId</span>&gt; </span>
<span id="cb7-27"><a aria-hidden="true" href="#cb7-27" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;storm-core&lt;/<span class="kw">artifactId</span>&gt; </span>
<span id="cb7-28"><a aria-hidden="true" href="#cb7-28" tabindex="-1"></a>    &lt;<span class="kw">version</span>&gt;1.2.3&lt;/<span class="kw">version</span>&gt; </span>
<span id="cb7-29"><a aria-hidden="true" href="#cb7-29" tabindex="-1"></a>    &lt;<span class="kw">scope</span>&gt;provided&lt;/<span class="kw">scope</span>&gt;</span>
<span id="cb7-30"><a aria-hidden="true" href="#cb7-30" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span>
<span id="cb7-31"><a aria-hidden="true" href="#cb7-31" tabindex="-1"></a></span>
<span id="cb7-32"><a aria-hidden="true" href="#cb7-32" tabindex="-1"></a>  &lt;/<span class="kw">dependencies</span>&gt;</span>
<span id="cb7-33"><a aria-hidden="true" href="#cb7-33" tabindex="-1"></a></span>
<span id="cb7-34"><a aria-hidden="true" href="#cb7-34" tabindex="-1"></a>&lt;<span class="kw">repositories</span>&gt;</span>
<span id="cb7-35"><a aria-hidden="true" href="#cb7-35" tabindex="-1"></a>        &lt;<span class="kw">repository</span>&gt;</span>
<span id="cb7-36"><a aria-hidden="true" href="#cb7-36" tabindex="-1"></a>                &lt;<span class="kw">id</span>&gt;clojars.org&lt;/<span class="kw">id</span>&gt;</span>
<span id="cb7-37"><a aria-hidden="true" href="#cb7-37" tabindex="-1"></a>                &lt;<span class="kw">url</span>&gt;http://clojars.org/repo&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb7-38"><a aria-hidden="true" href="#cb7-38" tabindex="-1"></a>        &lt;/<span class="kw">repository</span>&gt;</span>
<span id="cb7-39"><a aria-hidden="true" href="#cb7-39" tabindex="-1"></a>&lt;/<span class="kw">repositories</span>&gt;</span>
<span id="cb7-40"><a aria-hidden="true" href="#cb7-40" tabindex="-1"></a></span>
<span id="cb7-41"><a aria-hidden="true" href="#cb7-41" tabindex="-1"></a></span>
<span id="cb7-42"><a aria-hidden="true" href="#cb7-42" tabindex="-1"></a>&lt;<span class="kw">build</span>&gt; </span>
<span id="cb7-43"><a aria-hidden="true" href="#cb7-43" tabindex="-1"></a>    &lt;<span class="kw">plugins</span>&gt; </span>
<span id="cb7-44"><a aria-hidden="true" href="#cb7-44" tabindex="-1"></a>        &lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb7-45"><a aria-hidden="true" href="#cb7-45" tabindex="-1"></a>            &lt;<span class="kw">artifactId</span>&gt;maven-assembly-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb7-46"><a aria-hidden="true" href="#cb7-46" tabindex="-1"></a>            &lt;<span class="kw">version</span>&gt;2.2.1&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb7-47"><a aria-hidden="true" href="#cb7-47" tabindex="-1"></a>            &lt;<span class="kw">configuration</span>&gt; </span>
<span id="cb7-48"><a aria-hidden="true" href="#cb7-48" tabindex="-1"></a>                &lt;<span class="kw">descriptorRefs</span>&gt;</span>
<span id="cb7-49"><a aria-hidden="true" href="#cb7-49" tabindex="-1"></a>                    &lt;<span class="kw">descriptorRef</span>&gt;jar-with-dependencies &lt;/<span class="kw">descriptorRef</span>&gt; </span>
<span id="cb7-50"><a aria-hidden="true" href="#cb7-50" tabindex="-1"></a>                &lt;/<span class="kw">descriptorRefs</span>&gt; </span>
<span id="cb7-51"><a aria-hidden="true" href="#cb7-51" tabindex="-1"></a>                &lt;<span class="kw">archive</span>&gt; </span>
<span id="cb7-52"><a aria-hidden="true" href="#cb7-52" tabindex="-1"></a>                    &lt;<span class="kw">manifest</span>&gt; &lt;<span class="kw">mainClass</span> /&gt; &lt;/<span class="kw">manifest</span>&gt;</span>
<span id="cb7-53"><a aria-hidden="true" href="#cb7-53" tabindex="-1"></a>                 &lt;/<span class="kw">archive</span>&gt;</span>
<span id="cb7-54"><a aria-hidden="true" href="#cb7-54" tabindex="-1"></a>            &lt;/<span class="kw">configuration</span>&gt;</span>
<span id="cb7-55"><a aria-hidden="true" href="#cb7-55" tabindex="-1"></a>            &lt;<span class="kw">executions</span>&gt; </span>
<span id="cb7-56"><a aria-hidden="true" href="#cb7-56" tabindex="-1"></a>                &lt;<span class="kw">execution</span>&gt;</span>
<span id="cb7-57"><a aria-hidden="true" href="#cb7-57" tabindex="-1"></a>                &lt;<span class="kw">id</span>&gt;make-assembly&lt;/<span class="kw">id</span>&gt;</span>
<span id="cb7-58"><a aria-hidden="true" href="#cb7-58" tabindex="-1"></a>                &lt;<span class="kw">phase</span>&gt;package&lt;/<span class="kw">phase</span>&gt;</span>
<span id="cb7-59"><a aria-hidden="true" href="#cb7-59" tabindex="-1"></a>                &lt;<span class="kw">goals</span>&gt;</span>
<span id="cb7-60"><a aria-hidden="true" href="#cb7-60" tabindex="-1"></a>                     &lt;<span class="kw">goal</span>&gt;single&lt;/<span class="kw">goal</span>&gt;</span>
<span id="cb7-61"><a aria-hidden="true" href="#cb7-61" tabindex="-1"></a>                &lt;/<span class="kw">goals</span>&gt;</span>
<span id="cb7-62"><a aria-hidden="true" href="#cb7-62" tabindex="-1"></a>                &lt;/<span class="kw">execution</span>&gt;</span>
<span id="cb7-63"><a aria-hidden="true" href="#cb7-63" tabindex="-1"></a>            &lt;/<span class="kw">executions</span>&gt;</span>
<span id="cb7-64"><a aria-hidden="true" href="#cb7-64" tabindex="-1"></a>        &lt;/<span class="kw">plugin</span>&gt;</span>
<span id="cb7-65"><a aria-hidden="true" href="#cb7-65" tabindex="-1"></a>     &lt;/<span class="kw">plugins</span>&gt;</span>
<span id="cb7-66"><a aria-hidden="true" href="#cb7-66" tabindex="-1"></a>&lt;/<span class="kw">build</span>&gt;</span>
<span id="cb7-67"><a aria-hidden="true" href="#cb7-67" tabindex="-1"></a></span>
<span id="cb7-68"><a aria-hidden="true" href="#cb7-68" tabindex="-1"></a>&lt;/<span class="kw">project</span>&gt;</span></code></pre>
  </div>
  <h3 id="topology">
   Topology
  </h3>
  <p>
   SpoutDemo
  </p>
  <div class="sourceCode" id="cb8">
   <pre class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a aria-hidden="true" href="#cb8-1" tabindex="-1"></a><span class="kw">package</span><span class="im"> storm</span><span class="op">.</span><span class="im">test</span><span class="op">;</span></span>
<span id="cb8-2"><a aria-hidden="true" href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a aria-hidden="true" href="#cb8-3" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">spout</span><span class="op">.</span><span class="im">SpoutOutputCollector</span><span class="op">;</span></span>
<span id="cb8-4"><a aria-hidden="true" href="#cb8-4" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">task</span><span class="op">.</span><span class="im">TopologyContext</span><span class="op">;</span></span>
<span id="cb8-5"><a aria-hidden="true" href="#cb8-5" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">topology</span><span class="op">.</span><span class="im">OutputFieldsDeclarer</span><span class="op">;</span></span>
<span id="cb8-6"><a aria-hidden="true" href="#cb8-6" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">topology</span><span class="op">.</span><span class="im">base</span><span class="op">.</span><span class="im">BaseRichSpout</span><span class="op">;</span></span>
<span id="cb8-7"><a aria-hidden="true" href="#cb8-7" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">tuple</span><span class="op">.</span><span class="im">Fields</span><span class="op">;</span></span>
<span id="cb8-8"><a aria-hidden="true" href="#cb8-8" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">tuple</span><span class="op">.</span><span class="im">Values</span><span class="op">;</span></span>
<span id="cb8-9"><a aria-hidden="true" href="#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a aria-hidden="true" href="#cb8-10" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">HashMap</span><span class="op">;</span></span>
<span id="cb8-11"><a aria-hidden="true" href="#cb8-11" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">Map</span><span class="op">;</span></span>
<span id="cb8-12"><a aria-hidden="true" href="#cb8-12" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">Random</span><span class="op">;</span></span>
<span id="cb8-13"><a aria-hidden="true" href="#cb8-13" tabindex="-1"></a></span>
<span id="cb8-14"><a aria-hidden="true" href="#cb8-14" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MySpout <span class="kw">extends</span> BaseRichSpout <span class="op">{</span></span>
<span id="cb8-15"><a aria-hidden="true" href="#cb8-15" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">long</span> serialVersionUID <span class="op">=</span> <span class="dv">1L</span><span class="op">;</span></span>
<span id="cb8-16"><a aria-hidden="true" href="#cb8-16" tabindex="-1"></a>    <span class="kw">private</span> SpoutOutputCollector spoutOutputCollector<span class="op">;</span></span>
<span id="cb8-17"><a aria-hidden="true" href="#cb8-17" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">Integer</span><span class="op">,</span><span class="bu">String</span><span class="op">&gt;</span> map <span class="op">=</span> <span class="kw">new</span> <span class="bu">HashMap</span><span class="op">&lt;</span><span class="bu">Integer</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;();</span></span>
<span id="cb8-18"><a aria-hidden="true" href="#cb8-18" tabindex="-1"></a>    <span class="dt">static</span> <span class="op">{</span></span>
<span id="cb8-19"><a aria-hidden="true" href="#cb8-19" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span><span class="st">"huawei"</span><span class="op">);</span></span>
<span id="cb8-20"><a aria-hidden="true" href="#cb8-20" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="st">"google"</span><span class="op">);</span></span>
<span id="cb8-21"><a aria-hidden="true" href="#cb8-21" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="dv">2</span><span class="op">,</span><span class="st">"ali"</span><span class="op">);</span></span>
<span id="cb8-22"><a aria-hidden="true" href="#cb8-22" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="dv">3</span><span class="op">,</span><span class="st">"tencent"</span><span class="op">);</span></span>
<span id="cb8-23"><a aria-hidden="true" href="#cb8-23" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="dv">4</span><span class="op">,</span><span class="st">"baidu"</span><span class="op">);</span></span>
<span id="cb8-24"><a aria-hidden="true" href="#cb8-24" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-25"><a aria-hidden="true" href="#cb8-25" tabindex="-1"></a></span>
<span id="cb8-26"><a aria-hidden="true" href="#cb8-26" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">open</span><span class="op">(</span><span class="bu">Map</span> map<span class="op">,</span> TopologyContext topologyContext<span class="op">,</span> SpoutOutputCollector spoutOutputCollector<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-27"><a aria-hidden="true" href="#cb8-27" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">spoutOutputCollector</span> <span class="op">=</span> spoutOutputCollector<span class="op">;</span></span>
<span id="cb8-28"><a aria-hidden="true" href="#cb8-28" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-29"><a aria-hidden="true" href="#cb8-29" tabindex="-1"></a></span>
<span id="cb8-30"><a aria-hidden="true" href="#cb8-30" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">nextTuple</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-31"><a aria-hidden="true" href="#cb8-31" tabindex="-1"></a>        <span class="dt">final</span> <span class="bu">Random</span> random <span class="op">=</span> <span class="kw">new</span> <span class="bu">Random</span><span class="op">();</span></span>
<span id="cb8-32"><a aria-hidden="true" href="#cb8-32" tabindex="-1"></a></span>
<span id="cb8-33"><a aria-hidden="true" href="#cb8-33" tabindex="-1"></a>        <span class="dt">int</span> randomNumber <span class="op">=</span> random<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb8-34"><a aria-hidden="true" href="#cb8-34" tabindex="-1"></a>        spoutOutputCollector<span class="op">.</span><span class="fu">emit</span><span class="op">(</span><span class="kw">new</span> <span class="fu">Values</span><span class="op">(</span>map<span class="op">.</span><span class="fu">get</span><span class="op">(</span>randomNumber<span class="op">)));</span></span>
<span id="cb8-35"><a aria-hidden="true" href="#cb8-35" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-36"><a aria-hidden="true" href="#cb8-36" tabindex="-1"></a></span>
<span id="cb8-37"><a aria-hidden="true" href="#cb8-37" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">declareOutputFields</span><span class="op">(</span>OutputFieldsDeclarer outputFieldsDeclarer<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-38"><a aria-hidden="true" href="#cb8-38" tabindex="-1"></a>        outputFieldsDeclarer<span class="op">.</span><span class="fu">declare</span><span class="op">(</span><span class="kw">new</span> <span class="fu">Fields</span><span class="op">(</span><span class="st">"company"</span><span class="op">));</span></span>
<span id="cb8-39"><a aria-hidden="true" href="#cb8-39" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-40"><a aria-hidden="true" href="#cb8-40" tabindex="-1"></a><span class="op">}</span></span></code></pre>
  </div>
  <p>
   Bolt Demo
  </p>
  <div class="sourceCode" id="cb9">
   <pre class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a aria-hidden="true" href="#cb9-1" tabindex="-1"></a><span class="kw">package</span><span class="im"> storm</span><span class="op">.</span><span class="im">test</span><span class="op">;</span></span>
<span id="cb9-2"><a aria-hidden="true" href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a aria-hidden="true" href="#cb9-3" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">task</span><span class="op">.</span><span class="im">OutputCollector</span><span class="op">;</span></span>
<span id="cb9-4"><a aria-hidden="true" href="#cb9-4" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">task</span><span class="op">.</span><span class="im">TopologyContext</span><span class="op">;</span></span>
<span id="cb9-5"><a aria-hidden="true" href="#cb9-5" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">topology</span><span class="op">.</span><span class="im">OutputFieldsDeclarer</span><span class="op">;</span></span>
<span id="cb9-6"><a aria-hidden="true" href="#cb9-6" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">topology</span><span class="op">.</span><span class="im">base</span><span class="op">.</span><span class="im">BaseRichBolt</span><span class="op">;</span></span>
<span id="cb9-7"><a aria-hidden="true" href="#cb9-7" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">tuple</span><span class="op">.</span><span class="im">Tuple</span><span class="op">;</span></span>
<span id="cb9-8"><a aria-hidden="true" href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a aria-hidden="true" href="#cb9-9" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">Map</span><span class="op">;</span></span>
<span id="cb9-10"><a aria-hidden="true" href="#cb9-10" tabindex="-1"></a></span>
<span id="cb9-11"><a aria-hidden="true" href="#cb9-11" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MyBolt <span class="kw">extends</span> BaseRichBolt <span class="op">{</span></span>
<span id="cb9-12"><a aria-hidden="true" href="#cb9-12" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">long</span> serialVersionUID <span class="op">=</span> <span class="dv">1L</span><span class="op">;</span></span>
<span id="cb9-13"><a aria-hidden="true" href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a aria-hidden="true" href="#cb9-14" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">prepare</span><span class="op">(</span><span class="bu">Map</span> map<span class="op">,</span> TopologyContext topologyContext<span class="op">,</span> OutputCollector outputCollector<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-15"><a aria-hidden="true" href="#cb9-15" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-16"><a aria-hidden="true" href="#cb9-16" tabindex="-1"></a></span>
<span id="cb9-17"><a aria-hidden="true" href="#cb9-17" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">execute</span><span class="op">(</span>Tuple tuple<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-18"><a aria-hidden="true" href="#cb9-18" tabindex="-1"></a>        <span class="bu">String</span> company <span class="op">=</span> tuple<span class="op">.</span><span class="fu">getStringByField</span><span class="op">(</span><span class="st">"company"</span><span class="op">);</span></span>
<span id="cb9-19"><a aria-hidden="true" href="#cb9-19" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"company "</span> <span class="op">+</span> company<span class="op">);</span></span>
<span id="cb9-20"><a aria-hidden="true" href="#cb9-20" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-21"><a aria-hidden="true" href="#cb9-21" tabindex="-1"></a></span>
<span id="cb9-22"><a aria-hidden="true" href="#cb9-22" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">declareOutputFields</span><span class="op">(</span>OutputFieldsDeclarer outputFieldsDeclarer<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-23"><a aria-hidden="true" href="#cb9-23" tabindex="-1"></a></span>
<span id="cb9-24"><a aria-hidden="true" href="#cb9-24" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-25"><a aria-hidden="true" href="#cb9-25" tabindex="-1"></a><span class="op">}</span></span></code></pre>
  </div>
  <h3 id="submission-local">
   Submission (Local)
  </h3>
  <div class="sourceCode" id="cb10">
   <pre class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a aria-hidden="true" href="#cb10-1" tabindex="-1"></a><span class="kw">package</span><span class="im"> storm</span><span class="op">.</span><span class="im">test</span><span class="op">;</span></span>
<span id="cb10-2"><a aria-hidden="true" href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a aria-hidden="true" href="#cb10-3" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">Config</span><span class="op">;</span></span>
<span id="cb10-4"><a aria-hidden="true" href="#cb10-4" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">LocalCluster</span><span class="op">;</span></span>
<span id="cb10-5"><a aria-hidden="true" href="#cb10-5" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">topology</span><span class="op">.</span><span class="im">TopologyBuilder</span><span class="op">;</span></span>
<span id="cb10-6"><a aria-hidden="true" href="#cb10-6" tabindex="-1"></a></span>
<span id="cb10-7"><a aria-hidden="true" href="#cb10-7" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MyTopology <span class="op">{</span></span>
<span id="cb10-8"><a aria-hidden="true" href="#cb10-8" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="kw">throws</span> <span class="bu">InterruptedException</span> <span class="op">{</span></span>
<span id="cb10-9"><a aria-hidden="true" href="#cb10-9" tabindex="-1"></a>        TopologyBuilder builder <span class="op">=</span> <span class="kw">new</span> <span class="fu">TopologyBuilder</span><span class="op">();</span></span>
<span id="cb10-10"><a aria-hidden="true" href="#cb10-10" tabindex="-1"></a></span>
<span id="cb10-11"><a aria-hidden="true" href="#cb10-11" tabindex="-1"></a>        builder<span class="op">.</span><span class="fu">setSpout</span><span class="op">(</span><span class="st">"Random Company Generator"</span><span class="op">,</span><span class="kw">new</span> <span class="fu">MySpout</span><span class="op">(),</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb10-12"><a aria-hidden="true" href="#cb10-12" tabindex="-1"></a>        builder<span class="op">.</span><span class="fu">setBolt</span><span class="op">(</span><span class="st">"Company Printer"</span><span class="op">,</span><span class="kw">new</span> <span class="fu">MyBolt</span><span class="op">(),</span><span class="dv">4</span><span class="op">).</span><span class="fu">shuffleGrouping</span><span class="op">(</span><span class="st">"Random Company Generator"</span><span class="op">);</span></span>
<span id="cb10-13"><a aria-hidden="true" href="#cb10-13" tabindex="-1"></a></span>
<span id="cb10-14"><a aria-hidden="true" href="#cb10-14" tabindex="-1"></a>        Config config <span class="op">=</span> <span class="kw">new</span> <span class="fu">Config</span><span class="op">();</span></span>
<span id="cb10-15"><a aria-hidden="true" href="#cb10-15" tabindex="-1"></a>        config<span class="op">.</span><span class="fu">setDebug</span><span class="op">(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb10-16"><a aria-hidden="true" href="#cb10-16" tabindex="-1"></a></span>
<span id="cb10-17"><a aria-hidden="true" href="#cb10-17" tabindex="-1"></a></span>
<span id="cb10-18"><a aria-hidden="true" href="#cb10-18" tabindex="-1"></a>        LocalCluster cluster  <span class="op">=</span> <span class="kw">new</span> <span class="fu">LocalCluster</span><span class="op">();</span></span>
<span id="cb10-19"><a aria-hidden="true" href="#cb10-19" tabindex="-1"></a></span>
<span id="cb10-20"><a aria-hidden="true" href="#cb10-20" tabindex="-1"></a>        cluster<span class="op">.</span><span class="fu">submitTopology</span><span class="op">(</span><span class="st">"my Topology"</span><span class="op">,</span>config<span class="op">,</span>builder<span class="op">.</span><span class="fu">createTopology</span><span class="op">());</span></span>
<span id="cb10-21"><a aria-hidden="true" href="#cb10-21" tabindex="-1"></a></span>
<span id="cb10-22"><a aria-hidden="true" href="#cb10-22" tabindex="-1"></a>        <span class="bu">Thread</span><span class="op">.</span><span class="fu">sleep</span><span class="op">(</span><span class="dv">1000</span><span class="op">);</span></span>
<span id="cb10-23"><a aria-hidden="true" href="#cb10-23" tabindex="-1"></a>        cluster<span class="op">.</span><span class="fu">killTopology</span><span class="op">(</span><span class="st">"my Topology"</span><span class="op">);</span></span>
<span id="cb10-24"><a aria-hidden="true" href="#cb10-24" tabindex="-1"></a>        cluster<span class="op">.</span><span class="fu">shutdown</span><span class="op">();</span></span>
<span id="cb10-25"><a aria-hidden="true" href="#cb10-25" tabindex="-1"></a></span>
<span id="cb10-26"><a aria-hidden="true" href="#cb10-26" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-27"><a aria-hidden="true" href="#cb10-27" tabindex="-1"></a><span class="op">}</span></span></code></pre>
  </div>
  <h3 id="topology-submission-real-distributedremote">
   Topology Submission
(Real-Distributed/Remote)
  </h3>
  <div class="sourceCode" id="cb11">
   <pre class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a aria-hidden="true" href="#cb11-1" tabindex="-1"></a><span class="kw">package</span><span class="im"> storm</span><span class="op">.</span><span class="im">test</span><span class="op">.</span><span class="im">demo1</span><span class="op">;</span></span>
<span id="cb11-2"><a aria-hidden="true" href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a aria-hidden="true" href="#cb11-3" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">Config</span><span class="op">;</span></span>
<span id="cb11-4"><a aria-hidden="true" href="#cb11-4" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">StormSubmitter</span><span class="op">;</span></span>
<span id="cb11-5"><a aria-hidden="true" href="#cb11-5" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">generated</span><span class="op">.</span><span class="im">AlreadyAliveException</span><span class="op">;</span></span>
<span id="cb11-6"><a aria-hidden="true" href="#cb11-6" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">generated</span><span class="op">.</span><span class="im">AuthorizationException</span><span class="op">;</span></span>
<span id="cb11-7"><a aria-hidden="true" href="#cb11-7" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">generated</span><span class="op">.</span><span class="im">InvalidTopologyException</span><span class="op">;</span></span>
<span id="cb11-8"><a aria-hidden="true" href="#cb11-8" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">apache</span><span class="op">.</span><span class="im">storm</span><span class="op">.</span><span class="im">topology</span><span class="op">.</span><span class="im">TopologyBuilder</span><span class="op">;</span></span>
<span id="cb11-9"><a aria-hidden="true" href="#cb11-9" tabindex="-1"></a></span>
<span id="cb11-10"><a aria-hidden="true" href="#cb11-10" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MyTopology <span class="op">{</span></span>
<span id="cb11-11"><a aria-hidden="true" href="#cb11-11" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="kw">throws</span> <span class="bu">InterruptedException</span><span class="op">,</span> InvalidTopologyException<span class="op">,</span> AuthorizationException<span class="op">,</span> AlreadyAliveException <span class="op">{</span></span>
<span id="cb11-12"><a aria-hidden="true" href="#cb11-12" tabindex="-1"></a>        TopologyBuilder builder <span class="op">=</span> <span class="kw">new</span> <span class="fu">TopologyBuilder</span><span class="op">();</span></span>
<span id="cb11-13"><a aria-hidden="true" href="#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a aria-hidden="true" href="#cb11-14" tabindex="-1"></a>        builder<span class="op">.</span><span class="fu">setSpout</span><span class="op">(</span><span class="st">"RandomGenerateCompany"</span><span class="op">,</span><span class="kw">new</span> <span class="fu">MySpout</span><span class="op">(),</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb11-15"><a aria-hidden="true" href="#cb11-15" tabindex="-1"></a>        builder<span class="op">.</span><span class="fu">setBolt</span><span class="op">(</span><span class="st">"CompanyPrinter"</span><span class="op">,</span><span class="kw">new</span> <span class="fu">MyBolt</span><span class="op">(),</span><span class="dv">4</span><span class="op">).</span><span class="fu">shuffleGrouping</span><span class="op">(</span><span class="st">"RandomGenerateCompany"</span><span class="op">);</span></span>
<span id="cb11-16"><a aria-hidden="true" href="#cb11-16" tabindex="-1"></a></span>
<span id="cb11-17"><a aria-hidden="true" href="#cb11-17" tabindex="-1"></a>        Config config <span class="op">=</span> <span class="kw">new</span> <span class="fu">Config</span><span class="op">();</span></span>
<span id="cb11-18"><a aria-hidden="true" href="#cb11-18" tabindex="-1"></a><span class="co">//        config.setDebug(true);</span></span>
<span id="cb11-19"><a aria-hidden="true" href="#cb11-19" tabindex="-1"></a>        config<span class="op">.</span><span class="fu">setNumWorkers</span><span class="op">(</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb11-20"><a aria-hidden="true" href="#cb11-20" tabindex="-1"></a>        StormSubmitter<span class="op">.</span><span class="fu">submitTopology</span><span class="op">(</span>args<span class="op">[</span><span class="dv">0</span><span class="op">],</span>config<span class="op">,</span> builder<span class="op">.</span><span class="fu">createTopology</span><span class="op">());</span></span>
<span id="cb11-21"><a aria-hidden="true" href="#cb11-21" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-22"><a aria-hidden="true" href="#cb11-22" tabindex="-1"></a><span class="op">}</span></span></code></pre>
  </div>
  <p>
   Submit
  </p>
  <div class="sourceCode" id="cb12">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a aria-hidden="true" href="#cb12-1" tabindex="-1"></a><span class="ex">storm</span> jar jar_name.jar <span class="pp">[</span><span class="ss">TopologyMainClass</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">TopologyName</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">OtherArgs</span><span class="pp">]</span></span></code></pre>
  </div>
  <p>
   Submit之后就无休止地跑起来了，（第一次地时候没想到这么猛，虚拟机用的动态分配内存差点爆掉），Deactivate
topology:
  </p>
  <div class="sourceCode" id="cb13">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a aria-hidden="true" href="#cb13-1" tabindex="-1"></a><span class="ex">storm</span> deactivate topologyName </span></code></pre>
  </div>
  <p>
   彻底杀死topology，使之不再占用内存：
  </p>
  <div class="sourceCode" id="cb14">
   <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a aria-hidden="true" href="#cb14-1" tabindex="-1"></a><span class="ex">storm</span> kill topologyName</span></code></pre>
  </div>
  <p>
   Storm中经常用topologyName去对topology进行管理。
  </p>
  <p>
   所以名字最好取得规律一些。
  </p>
  <h1 id="其他">
   其他
  </h1>
  <h2 id="the-parallelism">
   The Parallelism
  </h2>
  <p>
   <img src="https://zehua-markdown.oss-cn-shanghai.aliyuncs.com/img/Storm.svg"/>
  </p>
  <h2 id="reliable-processing-of-messages">
   Reliable Processing of
Messages
  </h2>
  <p>
   一条Tuple（Message）从Spout出来，可能会衍生出一棵Tuple
Tree，如何才算最初始的那条信息（Tuple）处理完成了？
  </p>
  <ul>
   <li>
    Tuple Tree不再增长
   </li>
   <li>
    Tuple Tree中的所有Tuple都被标记为已处理
   </li>
  </ul>
  <p>
   超过特定时间（可设置
   <code>
    TOPOLOGY_MESSAGE_TIMEOUT_SECS
   </code>
   ，默认30秒）该Tuple
Tree未标记为处理成功，则意味着该信息处理失败。
  </p>
  <h3 id="acker">
   acker
  </h3>
  <h2 id="dispatcher-and-scheduler">
   Dispatcher and Scheduler
  </h2>
  <p>
   Storm提供三种调度程序
  </p>
  <ul>
   <li>
    EvenScheduler
   </li>
   <li>
    DefaultScheduler，先释放Topology不要的资源，再call
EvenScheduler
   </li>
   <li>
    IsolationScheduler
   </li>
  </ul>
  <p>
   也可以自定义Scheduler
  </p>
  <h2 id="trident">
   Trident
  </h2>
  <p>
   Processes in batch (a set of tuples).
  </p>
  <p>
   当一个节点故障时，其上的task很容易可以再分配，但bolt的state很难恢复，Trident
persist storm’s computational state information into the database.
  </p>
  <ul>
   <li>
    Partitional-local operations
   </li>
   <li>
    repartitioning operations
   </li>
   <li>
    aggregation operations
   </li>
   <li>
    operations on grouped streams: An operation on a packet strem
   </li>
   <li>
    merge, join operation
   </li>
  </ul>
 </body>
</html>
